{"version":3,"sources":["region.js"],"names":[],"mappings":"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","file":"region-compiled.js","sourcesContent":["\r\nconst TABLES = {\r\n    VILLAS              : 342,\r\n    FEATURES            : 348,\r\n    DIRECTIONS          : 343,\r\n    REGIONS             : 345,\r\n    SUB_REGIONS         : 344,\r\n    ADDITIONAL_FIELDS   : 364,\r\n    IMAGES              : 428\r\n};\r\n\r\napp.controller('regionCtrl', ['$scope','$http', 'setCookieFact', function($s, $h, setCookieFact){\r\n    $s.targetRegion;\r\n    $s.titleRegion;\r\n    $s.pretext;\r\n    $s.subRegions = null;\r\n    $s.currentVills = []; // CURRENT vills\r\n    $s.regionCoordinates = [];\r\n    $s.dirCoordinates = [];\r\n    $s.destination = window.location.hostname;\r\n    console.log($s);\r\n\r\n    var domens = [\r\n        {\r\n            url: 'www.arenda-vill-italiya.com',\r\n            region: 'Италия',\r\n            id: '32955'\r\n        },\r\n        {\r\n            url: 'www.arenda-vill-ispaniya.com',\r\n            region: 'Испания',\r\n            id: '32765'\r\n        },\r\n        {\r\n            url: 'www.arenda-vill-franciya.com',\r\n            region: 'Франция',\r\n            id: '32954'\r\n        },\r\n        {\r\n            url: 'www.arenda-vill-asia.com',\r\n            region: 'Азия',\r\n            id: '32921'\r\n        },\r\n        {\r\n            url: 'www.arenda-vill-kariby.com',\r\n            region: 'Карибы',\r\n            id: '32953'\r\n        },\r\n        {\r\n            url: 'www.arenda-vill-balkany.com',\r\n            region: 'Балканы',\r\n            id: '32957'\r\n        },\r\n        {\r\n            url: 'www.arenda-chalet.com',\r\n            region: 'Шале',\r\n            id: '36281'\r\n        }\r\n    ];\r\n\r\n\r\n\r\n\r\n    // настройки панели выезжющей из-под хедера\r\n\r\n// \t$('.item.direction').mouseover(function(e){\r\n//     $('.sub').animate({\r\n//         top: '78px'\r\n//     }, 300);\r\n// })\r\n\r\n// $('.item.direction').mouseleave(function(e){\r\n\r\n//     var y = e.clientY;\r\n//     if(y < 0) {\r\n//         $('.sub').animate({\r\n//             top: '34px'\r\n//         }, 200);\r\n//     }\r\n// })\r\n\r\n// $('.sub').on('mouseleave',function(){\r\n//     $('.sub').animate({\r\n//         top: '34px'\r\n//     }, 200);\r\n// })\r\n\r\n\r\n    var regName, regId;\r\n    domens.forEach(function(d){\r\n        if(d.url == $s.destination){\r\n            regName = d.region;\r\n            regId = d.id;\r\n        }\r\n    });\r\n\r\n\r\n    var indexStep = 3;\r\n    $s.index = 0;\r\n    $s.incrementIndex = function() {\r\n        $s.index += indexStep;\r\n        if($s.index >= $s.currentVills.length) {\r\n            $s.index = 0;\r\n        }\r\n\r\n    };\r\n    $s.decrementIndex = function() {\r\n        $s.index -= indexStep;\r\n        if($s.index < 0) {\r\n            $s.index = $s.currentVills.length - 2 ;\r\n        }\r\n\r\n    };\r\n\r\n    $s.setFavouriteVilla = function(villaId, event) {\r\n        if(!event.target.classList.contains('active-like')) {\r\n            document.getElementById('modal').classList.add('show');\r\n            return setCookieFact.setFavouriteVilla(villaId);\r\n        }\r\n        else {\r\n            return setCookieFact.setFavouriteVilla(villaId);\r\n        }\r\n    }\r\n\r\n    $s.locateToAbousUs = function() {\r\n        window.location = 'http://www.arenda-vill.com/отдых-за-рубежом';\r\n    }\r\n\r\n    $s.moreInfo = function(villa) {\r\n        var t = villa.name.split(\" \").map(function(word){\r\n            return word.charAt(0).toLowerCase() + word.slice(1);\r\n        })\r\n        var villaUrl = t.reduce(function(prev, curr){\r\n            return prev + \"-\" + curr;\r\n        })\r\n        window.location = window.location.origin + \"/\" + villaUrl;\r\n    }\r\n    $s.locateToDirections = function() {\r\n        window.location = 'http://arenda-vill.com/аренда-виллы-на-море';\r\n    }\r\n    $h.get(`/api/data/table?t=${TABLES.REGIONS}&where[f8]=${location.host}`) // check about name of target region\r\n        .success(function(data){\r\n            $s.targetRegion = data;\r\n\r\n            data.forEach(function(sub){\r\n                if(sub.f1 == regName && sub.f4 != undefined) {\r\n                    $s.subRegions = [];\r\n                    sub.f4.forEach(function(s){\r\n                        if(s.f4){\r\n                            $s.subRegions.push({\r\n                                name: s.f1,\r\n                                lat: s.f4.split(\",\")[0],\r\n                                lng: s.f4.split(\",\")[1],\r\n                                url: s.f2\r\n                            });\r\n                        }\r\n                    })\r\n\r\n                }\r\n            });\r\n            var latitude,longitude;\r\n            if($s.targetRegion[0].f3){\r\n                latitude = $s.targetRegion[0].f3.split(',')[0];\r\n                longitude = $s.targetRegion[0].f3.split(',')[1];\r\n            }\r\n\r\n            $s.regionCoordinates.push({\r\n                latitude: latitude || '0',\r\n                longitude: longitude || '0'\r\n            });\r\n\r\n            $h.get(`/api/data/table?t=${TABLES.DIRECTIONS}`)\r\n                .success(function(directions){\r\n                    directions.forEach(function(dir){\r\n                        if(dir.f3 != undefined && dir.f3[0].f1 == $s.targetRegion[0].f1 && dir.f7) {\r\n                            let coords = [];\r\n                            if (coords = dir.f5.match(/([\\d.]+)\\s*,\\s*([\\d.]+)/)) $s.dirCoordinates.push({\r\n                                name: dir.f1,\r\n                                latitude: coords[1],\r\n                                longitude: coords[2],\r\n                                url: dir.url\r\n                            })\r\n                        }\r\n                    });\r\n\r\n                    if($s.subRegions == null) {\r\n                        initialize($s.regionCoordinates, $s.dirCoordinates, domens);\r\n                    }\r\n                    else {\r\n                        initialize($s.regionCoordinates, $s.dirCoordinates, regName, $s.subRegions);\r\n                    }\r\n                });\r\n\r\n\r\n\r\n            if($s.targetRegion[0].f1.slice(-1) == 'я') {\r\n                $s.titleRegion = $s.targetRegion[0].f1.slice(0, -1) + 'и';\r\n                $s.pretext = 'в';\r\n                if($s.targetRegion[0].f1 == 'Франция'){\r\n                    $s.pretext = 'во';\r\n                }\r\n            }\r\n            else if($s.targetRegion[0].f1.slice(-1) == 'ы') {\r\n                if($s.targetRegion[0].f1 == 'Альпы') {\r\n                    $s.titleRegion = $s.targetRegion[0].f1.slice(0, -1) + 'ах';\r\n                    $s.pretext = 'в';\r\n                }\r\n                else {\r\n                    $s.titleRegion = $s.targetRegion[0].f1.slice(0, -1) + 'ах';\r\n                    $s.pretext = 'на';\r\n                }\r\n\r\n            }\r\n            else {\r\n                $s.titleRegion = $s.targetRegion[0].f1;\r\n                $s.pretext = 'в';\r\n            }\r\n\r\n        });\r\n\r\n    $h.get(\"api/data/tableRows?r=\" + regId)\r\n        .success(function(data) {\r\n            $s.regionId = data[0].field_value_id;\r\n            $h.get(`/api/data/table?t=${TABLES.VILLAS}&connect[f8]=2`).success(handleVillas);\r\n        });\r\n    \r\n    function handleVillas(vills) {\r\n\r\n        var favouriteVillsFromCookies = setCookieFact.getFavouritesVill();\r\n\r\n        vills.forEach(function (vill) {\r\n\r\n            var villRegionId;\r\n            try {\r\n                villRegionId = vill.f8[0].f3.match(/\\d+/).pop();\r\n            } catch (e) {\r\n                villRegionId = null;\r\n            }\r\n\r\n            if (villRegionId === $s.regionId) {\r\n                $s.currentVills.push(vill);\r\n\r\n                vill.inFavourites = false;\r\n                vill.inFavourites = favouriteVillsFromCookies\r\n                    ? favouriteVillsFromCookies.some(cookieId => vill.field_value_id == cookieId)\r\n                    : false;\r\n\r\n                checkVillaStatus($s.currentVills);\r\n            }\r\n        });\r\n\r\n        $h.get(`/api/data/table?t=${TABLES.ADDITIONAL_FIELDS}`).success(handleAdditionalFields);\r\n    }\r\n\r\n    function handleAdditionalFields (rows) {\r\n\r\n        const table_id = TABLES.ADDITIONAL_FIELDS;\r\n\r\n        rows\r\n            .filter( row => row.villaId = row.f1.match(/\\d+/) )\r\n            .forEach(row => {\r\n                row.villaId = row.villaId[0];\r\n                $s.currentVills.some(villa => {\r\n                    if (villa.field_value_id == row.villaId) {\r\n                        const values = [row];\r\n                        villa.addFields = { table_id, values }\r\n                    }\r\n                })\r\n            })\r\n\r\n            vill.addFilds = filterByTableId(result, 364);\r\n    }\r\n    \r\n    function checkVillaStatus(array) {\r\n        $h.get('/api/data/table?t=364')\r\n            .success(function(vills){\r\n                vills.forEach(function(villa){\r\n                    array.forEach(function(elem){\r\n                        if(villa.f1) {\r\n                            if(elem.name == villa.f1[0].f1 && villa.status == 'hide') {\r\n                                var position = array.indexOf(elem);\r\n                                array.splice(position, 1);\r\n                            }\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n    }\r\n\r\n\r\n    getCurrentVillRegionId = function(villRegionId) {\r\n        return villRegionId.match(/\\d+/g)[0];\r\n    }\r\n    ///////////////////////// for mobile //////////////////////////////\r\n\r\n    $s.directions = [];\r\n    $h.get('/api/data/table?t=343')\r\n        .success(function(data){\r\n            console.log(data, 'directions');\r\n            var dirStore = [];\r\n            var subRegionStore = [];\r\n            data.forEach(function(direct){\r\n                if(direct.f3 != undefined && direct.f3[0].f1 == regName) {\r\n                    if(direct.f2 == undefined) {\r\n                        dirStore.push({\r\n                            name: direct.f1,\r\n                            url: direct.url,\r\n                            img: direct.f4\r\n                        })\r\n                    }\r\n                    else {\r\n                        subRegionStore.push(direct);\r\n\r\n                        subRegionStore.forEach(function(elem, i){\r\n                            if(findEquality($s.directions, elem) != false) {\r\n                                $s.directions.push({\r\n                                    sub: [],\r\n                                    name: elem.f2[0].f1,\r\n                                    url: elem.f2[0].f2,\r\n                                    img: elem.f4\r\n                                })\r\n                            }\r\n                        })\r\n                        $s.directions.forEach(function(r){\r\n                            data.forEach(function(d){\r\n\r\n                                if(d.f3 != undefined && d.f3[0].f1 == regName && d.f2 != undefined) {\r\n                                    if(d.f2[0].f1 == r.name) {\r\n                                        r.sub.push({\r\n                                            name: d.f1,\r\n                                            url: d.url,\r\n                                            img: d.f4\r\n                                        })\r\n                                    }\r\n                                }\r\n                            })\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n            $s.directions.forEach(function(elem){\r\n                elem.sub = unique(elem.sub); // удаляем повтоярющиеся элементы\r\n            })\r\n            dirStore.forEach(function(d){\r\n                $s.directions.push(d); // добовляем самостоятельные направления\r\n            })\r\n        })\r\n    function findEquality(array, elem) {\r\n        var result = null;\r\n        array.forEach(function(a){\r\n            if(a.name == elem.f2[0].f1) {\r\n                result = false;\r\n            }\r\n        })\r\n        return result;\r\n    }\r\n    function unique(arr) {\r\n        var result = [];\r\n\r\n        nextInput:\r\n            for (var i = 0; i < arr.length; i++) {\r\n                var str = arr[i]; // для каждого элемента\r\n                for (var j = 0; j < result.length; j++) { // ищем, был ли он уже?\r\n                    if (result[j].name == str.name) continue nextInput; // если да, то следующий\r\n                }\r\n                result.push(str);\r\n            }\r\n\r\n        return result;\r\n    }\r\n\r\n    //     if(d.f3[0].f1 == regName && d.f2 != undefined) {\r\n    //         $s.directions.push({\r\n    //             sub: [],\r\n    //             name: d.f2[0].f1,\r\n    //             url: d.f2[0].f2,\r\n    //             img: d.f4\r\n    //         })\r\n    //     }\r\n    //     else if(d.f3[0].f1 == regName && d.f2 == undefined) {\r\n    //         $s.directions.push({\r\n    //             name: d.f1,\r\n    //             url: d.url,\r\n    //             img: d.f4\r\n    //         });\r\n    //     }\r\n    //   })\r\n\r\n    //   $s.directions.forEach(function(direct){\r\n    //       data.forEach(function(data){\r\n    //         if(data.f2 != undefined) {\r\n    //             if(direct.name == data.f2[0].f1) {\r\n    //                 direct.sub.push(data);\r\n    //             }\r\n    //         }\r\n    //       })\r\n    //   })\r\n\r\n\r\n    // })\r\n\r\n    $s.locateTo = function(url) {\r\n        window.location = 'http://' + url;\r\n    }\r\n\r\n    function initialize(region, directions, targetRegion, subRegions) {\r\n\r\n        switch(targetRegion) {\r\n            case 'Карибы':\r\n                var zoomView = 5;\r\n                break;\r\n            case 'Балканы':\r\n                var zoomView = 5;\r\n                break;\r\n            case 'Азия':\r\n                var zoomView = 4;\r\n                break;\r\n            default:\r\n                var zoomView = 6;\r\n                break;\r\n\r\n        }\r\n\r\n        var view = [region[0].latitude, region[0].longitude];\r\n        var mymap = L.map('map').setView(view, zoomView);\r\n        mymap.scrollWheelZoom.disable();\r\n\r\n        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {\r\n            attribution: 'Map data © <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by                          -sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"http://mapbox.com\">Mapbox</a>',\r\n            maxZoom: 18,\r\n            id: 'zardwi.02b6pmgg',\r\n            accessToken: 'pk.eyJ1IjoiemFyZHdpIiwiYSI6ImNpbnZxOTRieTAwcHR2c2tsZng2amgwdmsifQ.HDmszTUL_ChtJUXtMLy9vQ'\r\n        }).addTo(mymap);\r\n\r\n\r\n\r\n        var subIcon = L.icon({\r\n            iconUrl: '/files/villa/location_pin.png',\r\n            iconSize:[56, 80],\r\n            iconAnchor:   [22, 76],\r\n            popupAnchor: [-97, 0]  // left and top\r\n\r\n        });\r\n\r\n        var dirIcon = L.icon({\r\n            iconUrl: '/files/villa/location_pin_small.png',\r\n            iconSize: [20, 28],\r\n            iconAnchor: [10, 40],\r\n            popupAnchor: [0, 5]\r\n        })\r\n        if(subRegions != null) {\r\n            subRegions.forEach(function(sub){\r\n                var marker = L.marker([sub.lat, sub.lng], {icon: subIcon}).addTo(mymap);\r\n                var link2 = $('<span class=\"custom-popup\">' + sub.name + '</span>').click(function() {\r\n                    window.location = 'http://' + sub.url;\r\n                })[0];\r\n                marker.bindPopup(link2);\r\n            })\r\n        }\r\n        if(directions && directions.length) {\r\n            directions.forEach(function(dir){\r\n                var marker = L.marker([dir.latitude, dir.longitude], {icon: dirIcon}).addTo(mymap);\r\n                var link = $('<span class=\"custom-popup-small\">' + dir.name + '</span>').click(function() {\r\n                    window.location = 'http://' + dir.url;\r\n                })[0];\r\n                marker.bindPopup(link);\r\n                marker.on('click', function(e){\r\n                    e.target._popup._contentNode.style.height = \"16px\";\r\n                    e.target._popup._contentNode.style.lineHeight = \"30%\";\r\n                    document.querySelector('.leaflet-popup-content-wrapper').style.right = \"60px\";\r\n                })\r\n            });\r\n            var kal = document.querySelector('.leaflet-zoom-animated').style.left;\r\n            kal = kal - '82px';\r\n        }\r\n\r\n        // \t\tvar marker = L.marker(coordinates).addTo(mymap);\r\n    }\r\n\r\n}]);\r\n\r\n\r\nfunction filterByTableId(obj, tableId) {\r\n    return obj.filter(function(el) {\r\n        return el.table_id == tableId;\r\n    })\r\n}\r\n\r\nwindow.addEventListener('load', function() {\r\n\r\n    count_slide = $('.slideshow .slide-item').length;\r\n    var i = 0;\r\n    var whatHide = false;\r\n    var timeSlide = 5000;\r\n\r\n    (function() {\r\n        if (i < count_slide) {\r\n            if (whatHide) x = count_slide; else x = i;\r\n            z = i+1;\r\n            if (i >= 1 || whatHide) {\r\n                $('.slideshow').find('.slide-item-'+x).hide(500).parent('.slideshow').find('.slide-item-'+z).show(500);\r\n                whatHide = false;\r\n            }\r\n            i++;\r\n        } else {\r\n            i = 0; whatHide = true;\r\n        }\r\n        if (whatHide) t = 0; else t = timeSlide;\r\n        setTimeout(arguments.callee, t);\r\n    })();\r\n\r\n\r\n\r\n\r\n//     $(function() {\r\n//     var down = false;\r\n// $('#content-1').touchstart(function() {\r\n//     down = true;\r\n// }).touchend(function() {\r\n//     down = false;\r\n// });\r\n//     var slides = $('#content-1 .block-info .w30').length;\r\n//     //var slideWidth = $('#slider').width();\r\n//     var slideWidth = $('#content-1 .block-info .w30').width()+20;\r\n//   var aantalitemszichtbaar =$('#content-1 .block-info').width()/($('#content-1 .block-info').width()+20);\r\n//     var min = 0;\r\n//     var max = -((slides - aantalitemszichtbaar) * slideWidth);\r\n\r\n//     $(\"#content-1 .block-info\").width(slides*slideWidth).draggable({\r\n//         axis: 'x',\r\n//         drag: function (event, ui) {\r\n//             if(down) {\r\n//             if (ui.position.left > min) ui.position.left = min;\r\n//             if (ui.position.left < max) ui.position.left = max;\r\n//             }\r\n//         }\r\n//     });\r\n// });\r\n    jQuery(document).ready(function($) {\r\n\r\n        setTimeout(setDropDown(), 1000);\r\n\r\n        function setDropDown() {\r\n            $('.arrow-more').click(function() {\r\n                $(this).parents('.w30').find('.down').slideToggle();\r\n                if($(this).hasClass('active-more')) {\r\n                    $(this).removeClass(\"active-more\");\r\n                }\r\n                else {\r\n                    $(this).addClass(\"active-more\");\r\n                }\r\n            })\r\n        }\r\n\r\n        $('.locate-to').click(function(){\r\n            $('html, body').animate({\r\n                scrollTop: $(\"#map\").offset().top\r\n            }, 2000);\r\n        })\r\n\r\n        var galleryItems = $('.cd-gallery').children('li');\r\n\r\n        galleryItems.each(function(){\r\n            var container = $(this),\r\n            // create slider dots\r\n                sliderDots = createSliderDots(container);\r\n            //check if item is on sale\r\n// \t\tupdatePrice(container, 0);\r\n\r\n            // update slider when user clicks one of the dots\r\n            sliderDots.on('click', function(){\r\n                var selectedDot = $(this);\r\n                if(!selectedDot.hasClass('selected')) {\r\n                    var selectedPosition = selectedDot.index(),\r\n                        activePosition = container.find('.cd-item-wrapper .selected').index();\r\n                    if( activePosition < selectedPosition) {\r\n                        nextSlide(container, sliderDots, selectedPosition);\r\n                    } else {\r\n                        prevSlide(container, sliderDots, selectedPosition);\r\n                    }\r\n\r\n                    // updatePrice(container, selectedPosition);\r\n                }\r\n            });\r\n\r\n            // update slider on swipeleft\r\n            container.find('.cd-item-wrapper').on('swipeleft', function(){\r\n                var wrapper = $(this);\r\n                if( !wrapper.find('.selected').is(':last-child') ) {\r\n                    var selectedPosition = container.find('.cd-item-wrapper .selected').index() + 1;\r\n                    nextSlide(container, sliderDots);\r\n                    // updatePrice(container, selectedPosition);\r\n                }\r\n            });\r\n\r\n            // update slider on swiperight\r\n            container.find('.cd-item-wrapper').on('swiperight', function(){\r\n                var wrapper = $(this);\r\n                if( !wrapper.find('.selected').is(':first-child') ) {\r\n                    var selectedPosition = container.find('.cd-item-wrapper .selected').index() - 1;\r\n                    prevSlide(container, sliderDots);\r\n                    // updatePrice(container, selectedPosition);\r\n                }\r\n            });\r\n\r\n            // preview image hover effect - desktop only\r\n            container.on('mouseover', '.move-right, .move-left', function(event){\r\n                hoverItem($(this), true);\r\n            });\r\n            container.on('mouseleave', '.move-right, .move-left', function(event){\r\n                hoverItem($(this), false);\r\n            });\r\n\r\n            // update slider when user clicks on the preview images\r\n            container.on('click', '.move-right, .move-left', function(event){\r\n                event.preventDefault();\r\n                if ( $(this).hasClass('move-right') ) {\r\n                    var selectedPosition = container.find('.cd-item-wrapper .selected').index() + 1;\r\n                    nextSlide(container, sliderDots);\r\n                } else {\r\n                    if ( $(this).hasClass('move-left') ) {\r\n                        var selectedPosition = container.find('.cd-item-wrapper .selected').index() - 1;\r\n                        prevSlide(container, sliderDots);\r\n                    }\r\n                }\r\n// \t\t\tupdatePrice(container, selectedPosition);\r\n            });\r\n        });\r\n\r\n        function createSliderDots(container){\r\n            var dotsWrapper = $('<ol class=\"cd-dots\"></ol>').insertAfter(container.children('a'));\r\n            container.find('.cd-item-wrapper li').each(function(index){\r\n                var dotWrapper = (index == 0) ? $('<li class=\"selected\"></li>') : $('<li></li>'),\r\n                    dot = $('<a href=\"#0\"></a>').appendTo(dotWrapper);\r\n                dotWrapper.appendTo(dotsWrapper);\r\n                dot.text(index+1);\r\n            });\r\n            return dotsWrapper.children('li');\r\n        }\r\n\r\n        function hoverItem(item, bool) {\r\n            ( item.hasClass('move-right') )\r\n                ? item.toggleClass('hover', bool).siblings('.selected, .move-left').toggleClass('focus-on-right', bool)\r\n                : item.toggleClass('hover', bool).siblings('.selected, .move-right').toggleClass('focus-on-left', bool);\r\n        }\r\n\r\n        function nextSlide(container, dots, n){\r\n            var visibleSlide = container.find('.cd-item-wrapper .selected'),\r\n                navigationDot = container.find('.cd-dots .selected');\r\n            if(typeof n === 'undefined') n = visibleSlide.index() + 1;\r\n            visibleSlide.removeClass('selected');\r\n            container.find('.cd-item-wrapper li').eq(n).addClass('selected').removeClass('move-right hover').prevAll().removeClass('move-right move-left focus-on-right').addClass('hide-left').end().prev().removeClass('hide-left').addClass('move-left').end().next().addClass('move-right');\r\n            navigationDot.removeClass('selected')\r\n            dots.eq(n).addClass('selected');\r\n        }\r\n\r\n        function prevSlide(container, dots, n){\r\n            var visibleSlide = container.find('.cd-item-wrapper .selected'),\r\n                navigationDot = container.find('.cd-dots .selected');\r\n            if(typeof n === 'undefined') n = visibleSlide.index() - 1;\r\n            visibleSlide.removeClass('selected focus-on-left');\r\n            container.find('.cd-item-wrapper li').eq(n).addClass('selected').removeClass('move-left hide-left hover').nextAll().removeClass('hide-left move-right move-left focus-on-left').end().next().addClass('move-right').end().prev().removeClass('hide-left').addClass('move-left');\r\n            navigationDot.removeClass('selected');\r\n            dots.eq(n).addClass('selected');\r\n        }\r\n\r\n\r\n\r\n\r\n// \tfunction updatePrice(container, n) {\r\n// \t\tvar priceTag = container.find('.cd-price'),\r\n// \t\t\tselectedItem = container.find('.cd-item-wrapper li').eq(n);\r\n// \t\tif( selectedItem.data('sale') ) {\r\n// \t\t\t// if item is on sale - cross old price and add new one\r\n// \t\t\tpriceTag.addClass('on-sale');\r\n// \t\t\tvar newPriceTag = ( priceTag.next('.cd-new-price').length > 0 ) ? priceTag.next('.cd-new-price') : $('<em class=\"cd-new-price\"></em>').insertAfter(priceTag);\r\n// \t\t\tnewPriceTag.text(selectedItem.data('price'));\r\n// \t\t\tsetTimeout(function(){ newPriceTag.addClass('is-visible'); }, 100);\r\n// \t\t} else {\r\n// \t\t\t// if item is not on sale - remove cross on old price and sale price\r\n// \t\t\tpriceTag.removeClass('on-sale').next('.cd-new-price').removeClass('is-visible').on('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(){\r\n// \t\t\t\tpriceTag.next('.cd-new-price').remove();\r\n// \t\t\t});\r\n// \t\t}\r\n// \t}\r\n    });\r\n});"]}