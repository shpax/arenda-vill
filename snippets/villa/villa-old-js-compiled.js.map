{"version":3,"sources":["villa-old-js.js"],"names":[],"mappings":"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","file":"villa-old-js-compiled.js","sourcesContent":["/**\r\n * Created by shpax on 11-Jul-16.\r\n */\r\napp.controller('villaCtrl', ['$scope','$http', 'setCookieFact', function($s, $h,  setCookieFact){\r\n    $s.setCookieFact = setCookieFact;\r\n    $s.currentVills = []; // CURRENT vills\r\n    $s.villaInfo;\r\n    $s.descriptionText1, $s.descriptionText2;\r\n    $s.regionName;\r\n    $s.nextVilla;\r\n    $s.coordinates = [];\r\n    $s.benefits = [];\r\n    $s.slides = [];\r\n    $s.alts = [];\r\n    $s.regionUrl = 'http://' + window.location.hostname;\r\n    $s.directionUrl;\r\n    $s.locHref = window.location.hostname + window.location.pathname;\r\n    var fav = angular.element(document.querySelector('.favorite-add'))[0];\r\n    console.log($s, 'scope');\r\n    var path = window.location.pathname,\r\n        villWords = path.substr(1).split('-').map(function(word){\r\n            return word.charAt(0).toUpperCase() + word.slice(1);\r\n        });\r\n\r\n    $s.villName = villWords.reduce(function(prev, curr){\r\n        return prev + \" \" + curr;\r\n    });\r\n\r\n    /// ****** RENDER ****** ///\r\n\r\n    $h.get('/api/data/table?t=342&where[f18]=' + location.pathname.substr(1))\r\n        .success(function(vills){\r\n            vills.forEach(function(v){\r\n                if(v.name == $s.villName) {\r\n                    $s.fieldValueId = v.field_value_id;\r\n                    $s.villaInfo = v;\r\n                }\r\n            });\r\n\r\n            $h.get(\"api/data/tableRows?r=\" + $s.fieldValueId)\r\n                .success(function(data){\r\n                    console.log(data, 'data');\r\n                    $s.villaInfo = data[0];\r\n                    $h.get('api/data/connectedWith?r=' + $s.villaInfo.field_value_id)\r\n                        .success(function(result){\r\n                            if(result) {\r\n                                $s.villaInfo.addFilds = filterByTableId(result, 364); // additional info\r\n                                $s.villaInfo.rooms    = filterByTableId(result, 352); // rooms ??\r\n                                regionAddSingleTarget($s.villaInfo);\r\n                                villsOfTargetReg();\r\n\r\n                                // map coordinates\r\n                                if($s.villaInfo.addFilds && $s.villaInfo.addFilds.length) {\r\n                                    $s.coordinates.push({\r\n                                        latitude: $s.villaInfo.addFilds[0].f8.split(',')[0],\r\n                                        longitude: $s.villaInfo.addFilds[0].f8.split(',')[1],\r\n                                        title: $s.targetDirect\r\n                                    });\r\n                                    initialize($s.coordinates, $s.villaInfo.name) // create map\r\n                                }\r\n                                else {\r\n                                    initialize();\r\n                                }\r\n\r\n                                if($s.villInfo) {\r\n                                    $s.villaInfo.f12.forEach(function(villaBenefits){\r\n                                        benefits.forEach(function(benefit){\r\n                                            if(villaBenefits.benefit_name == benefit.name) {\r\n                                                $s.benefits.push(benefit);\r\n                                            }\r\n                                        });\r\n                                    });\r\n\r\n                                }\r\n                                else {\r\n                                    console.log('else benefints');\r\n                                }\r\n                                if($s.villaInfo.f8) {\r\n                                    $s.directionUrl = 'http://' + $s.villaInfo.f8[0].url;\r\n                                }\r\n\r\n\r\n                                if($s.villaInfo.addFilds.length && $s.villaInfo.addFilds[0].f9) {\r\n\r\n                                    var sliderImgsRaw = $s.villaInfo.addFilds[0].f9;\r\n                                    try {\r\n                                        var sliderImages = JSON.parse(sliderImgsRaw);\r\n                                        sliderImages.forEach(function(slide){\r\n                                            $s.slides.push(slide.link);\r\n                                            $s.alts.push(slide.alt);\r\n                                        })\r\n                                    } catch (e) {\r\n                                        sliderImgsRaw.split(\",\").forEach(function(slide){\r\n                                            $s.slides.push(slide);\r\n                                            $s.alts.push(slide.split('/').pop());\r\n                                        })\r\n                                    }\r\n                                    console.log($s.alts)\r\n                                }\r\n                                else {\r\n                                    var defSlide1 = '/files/villas-image/mar4.jpg';\r\n                                    var defSlide2 = '/files/villas-image/mar3.jpg';\r\n                                    $s.slides.push(defSlide1);\r\n                                    $s.slides.push(defSlide2);\r\n                                }\r\n                                $s.likedClass = isFav();\r\n                                cutDesripction();\r\n                            }\r\n                        })\r\n                })\r\n\r\n        })\r\n    function isFav() {\r\n        var result;\r\n        $s.setCookieFact.getFavouritesVill().forEach(function(vill){\r\n            if(vill == $s.villaInfo.field_value_id) {\r\n                result = true;\r\n            }\r\n        })\r\n        return result;\r\n    }\r\n\r\n    $s.addFavTarget = function(villaId, event) {\r\n        if(!event.target.classList.contains('active-like')) {\r\n            event.target.classList.add('active-like');\r\n            document.getElementById('modal').classList.add('show');\r\n            return setCookieFact.setFavouriteVilla(villaId);\r\n        }\r\n        else {\r\n            event.target.classList.remove('active-like');\r\n            return setCookieFact.setFavouriteVilla(villaId);\r\n        }\r\n    }\r\n\r\n    $s.isFavTarget = function(villaId) {\r\n        var result;\r\n        setCookieFact.getFavouritesVill().forEach(function(vill){\r\n            if(vill == villaId) {\r\n                result = true;\r\n            }\r\n        })\r\n        return result;\r\n    }\r\n\r\n    /// ****** RENDER ****** ///\r\n\r\n\r\n\r\n    $s.prevVilla = function() {\r\n        var result = (function() {\r\n            $s.currentVills.forEach(function(villa, index) {\r\n                if (villa.name == $s.villaInfo.name) {\r\n                    result = index;\r\n                }\r\n            })\r\n            return result;\r\n        })();\r\n\r\n        if(fav.classList.contains('active')) {\r\n            fav.classList.remove('active');\r\n        }\r\n\r\n        if(result == $s.currentVills.indexOf($s.currentVills[0])) {\r\n            $s.villaInfo = $s.currentVills[$s.currentVills.length - 1];\r\n            locateToNewUrl($s.villaInfo);\r\n\r\n        }\r\n        else {\r\n            $s.villaInfo = $s.currentVills[result - 1];\r\n            locateToNewUrl($s.villaInfo);\r\n        }\r\n\r\n\r\n    }\r\n    $s.nextVilla = function() {\r\n        var result = (function() {\r\n            $s.currentVills.forEach(function(villa, index) {\r\n                if (villa.name == $s.villaInfo.name) {\r\n                    result = index;\r\n                }\r\n            })\r\n            return result;\r\n        })();\r\n\r\n\r\n        if(fav.classList.contains('active')) {\r\n            fav.classList.remove('active');\r\n        }\r\n\r\n        if(result == $s.currentVills.length - 1) {\r\n            $s.villaInfo = $s.currentVills[0];\r\n            locateToNewUrl($s.villaInfo);\r\n\r\n        }\r\n        else {\r\n            $s.villaInfo = $s.currentVills[result + 1];\r\n            locateToNewUrl($s.villaInfo);\r\n\r\n        }\r\n    }\r\n    $s.showVillaInfo = function(url) {\r\n        window.location = 'http://' + url;\r\n    }\r\n\r\n    function locateToNewUrl(item) {\r\n        var t = item.name.split(\" \").map(function(word){\r\n            return word.charAt(0).toLowerCase() + word.slice(1);\r\n        })\r\n        var villaUrl = t.reduce(function(prev, curr){\r\n            return prev + \"-\" + curr;\r\n        })\r\n        window.location = 'http://' + item.url;\r\n    }\r\n\r\n    $s.addFav = function(villaId) {\r\n        if(!event.target.classList.contains('active')) {\r\n            document.getElementById('modal').classList.add('show');\r\n            return setCookieFact.setFavouriteVilla(villaId);\r\n        }\r\n        else {\r\n            return setCookieFact.setFavouriteVilla(villaId);\r\n        }\r\n    }\r\n    $s.moreInfo = function(villa) {\r\n        var t = villa.name.split(\" \").map(function(word){\r\n            return word.charAt(0).toLowerCase() + word.slice(1);\r\n        })\r\n        var villaUrl = t.reduce(function(prev, curr){\r\n            return prev + \"-\" + curr;\r\n        })\r\n        window.location =  'http://' + villa.url;\r\n    }\r\n\r\n    $s.sendVillToHeader = function(villa) {\r\n        $s.setCookieFact.addVill(villa.name);\r\n        document.querySelector('.modal').classList.add('slide-in-top', 'show1');\r\n        document.getElementById('effect-name').innerHTML = 'Отправить Заявку';\r\n    }\r\n    $s.setFavouriteVilla = function(villaId, event) {\r\n        if(!event.target.classList.contains('active-like')) {\r\n            document.getElementById('modal').classList.add('show');\r\n            return $s.setCookieFact.setFavouriteVilla(villaId);\r\n        }\r\n        else {\r\n            return $s.setCookieFact.setFavouriteVilla(villaId);\r\n        }\r\n    }\r\n\r\n    var nameReg = /^[a-zA-Zа-яА-Я'][a-zA-Zа-яА-Я-' ]+[a-zA-Zа-яА-Я']?$/,\r\n        emailReg = /^[\\w\\.-_\\+]+@[\\w-]+(\\.\\w{2,4})+$/,\r\n        phoneReg = /^([+]+)*[0-9\\x20\\x28\\x29-]{7,12}$/;\r\n\r\n    $s.validateName = function() {\r\n        if($s.reqName != undefined) {\r\n            if(!nameReg.test($s.reqName)) {\r\n                document.getElementById('nameV').style.borderBottomColor = \"red\";\r\n                return false;\r\n            }\r\n            else {\r\n                document.getElementById('nameV').style.borderBottomColor = \"#d0d0d0\";\r\n                return true;\r\n            }\r\n        }\r\n        else if($s.regName == undefined){\r\n            document.getElementById('nameV').style.borderBottomColor = \"red\";\r\n            return false;\r\n        }\r\n        else {\r\n            document.getElementById('nameV').style.borderBottomColor = \"#d0d0d0\";\r\n            return true;\r\n        }\r\n\r\n    }\r\n    $s.validatePhone = function() {\r\n        if($s.reqPhone != undefined) {\r\n            if(!phoneReg.test($s.reqPhone)) {\r\n                document.getElementById('phoneV').style.borderBottomColor = \"red\";\r\n                return false;\r\n            }\r\n            else {\r\n                document.getElementById('phoneV').style.borderBottomColor = \"#d0d0d0\";\r\n                return true;\r\n            }\r\n        }\r\n        else if($s.regPhone == undefined){\r\n            document.getElementById('phoneV').style.borderBottomColor = \"red\";\r\n            return false;\r\n        }\r\n        else {\r\n            document.getElementById('phoneV').style.borderBottomColor = \"#d0d0d0\";\r\n            return true;\r\n        }\r\n    }\r\n\r\n    $s.validateEmail = function() {\r\n        if($s.reqEmail != undefined) {\r\n            if(!emailReg.test($s.reqEmail)) {\r\n                document.getElementById('emailV').style.borderBottomColor = \"red\";\r\n                return false;\r\n            }\r\n            else {\r\n                document.getElementById('emailV').style.borderBottomColor = \"#d0d0d0\";\r\n                return true;\r\n            }\r\n        }\r\n        else if($s.regEmail == undefined){\r\n            document.getElementById('emailV').style.borderBottomColor = \"red\";\r\n            return false;\r\n        }\r\n        else {\r\n            document.getElementById('emailV').style.borderBottomColor = \"#d0d0d0\";\r\n            return true;\r\n        }\r\n    }\r\n    $s.validateComments = function() {\r\n\r\n        if($s.reqComments == undefined) {\r\n            document.getElementById('commentsV').style.borderBottomColor = \"red\";\r\n            return false;\r\n        }\r\n        else {\r\n            document.getElementById('commentsV').style.borderBottomColor = \"#d0d0d0\";\r\n            return true;\r\n        }\r\n    }\r\n\r\n\r\n    var db = new DataManager();\r\n    $s.sendReqDataVilla = function(villa, targetForm) {\r\n        if($s.validateName() == true && $s.validatePhone() == true\r\n            && $s.validateEmail() == true\r\n            && $s.validateComments() == true) {\r\n            var formVilla = document.getElementById(targetForm),\r\n                form      = new FormData(formVilla),\r\n                inputs    = formVilla.querySelectorAll('input'),\r\n                dataToAdmin = villa.url;\r\n\r\n            form.append('data[f5]', villa.name);\r\n            db.add(391, form ,function(res) {\r\n                console.log(res);\r\n            });\r\n\r\n            if(targetForm == 'form-villa-mobile') {\r\n                sendMail($s.reqNameMobile, $s.reqPhoneMobile, $s.reqEmailMobile, $s.reqCommentsMobile, dataToAdmin);\r\n            }\r\n            else if(targetForm == 'form-villa') {\r\n                sendMail($s.reqName, $s.reqPhone, $s.reqEmail, $s.reqComments, dataToAdmin);\r\n            }\r\n            else {\r\n                console.log('Something wrong :(');\r\n            }\r\n\r\n            [].slice.call(inputs).forEach(function(input){\r\n                input.value = \"\";\r\n            });\r\n        }\r\n        else {\r\n            document.getElementById('nameV').style.borderBottomColor = \"red\";\r\n            document.getElementById('phoneV').style.borderBottomColor = \"red\";\r\n            document.getElementById('emailV').style.borderBottomColor = \"red\";\r\n            document.getElementById('commentsV').style.borderBottomColor = \"red\";\r\n\r\n            document.getElementById('nameVmobile').style.borderBottomColor = \"red\";\r\n            document.getElementById('phoneVmobile').style.borderBottomColor = \"red\";\r\n            document.getElementById('emailVmobile').style.borderBottomColor = \"red\";\r\n            document.getElementById('commentsVmobile').style.borderBottomColor = \"red\";\r\n        }\r\n\r\n    }\r\n    function sendMail(name, phone, email, comment, villa) {\r\n        var f = new FormData();\r\n        var sbj = \"Проверка вил на доступность.\";\r\n\r\n        f.append('sbj', sbj);\r\n        f.append('t','report_mail');\r\n\r\n        f.append('r[name]', name);\r\n        f.append('r[phone]', phone);\r\n        f.append('r[email]', email);\r\n        f.append('r[comment]', comment);\r\n        f.append('r[vills]', villa);\r\n        f.append('u','74'); // твой юзер_ид. Если убрать, будет отправляться админу\r\n        // f.append('r[email]', 'не указано'); // замена данных в шаблоне\r\n        // f.append('r[message]', 'mgs'); // и т.д. ...\r\n\r\n        ajaxPost('/api/mail/mailAdmin',f,true,function(res) {\r\n            console.log(res);\r\n        })\r\n    }\r\n\r\n\r\n    function ajaxPost(href,data, async,func, $s) {\r\n        var xhr = getCrossXHR();\r\n        async = async ? true : false;\r\n        if (func) xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && xhr.status == 200) func(xhr.responseText);\r\n            if ($s) $s.notices.push('readyState - ' + xhr.readyState + '; status - ' + xhr.status + '; responce - ' + xhr.responseText)\r\n        };\r\n        xhr.open('POST',href,async);\r\n        if ($s) $s.notices.push('3')\r\n        if ($s) $s.notices.push(data.constructor.name)\r\n        xhr.send(data);\r\n    }\r\n\r\n\r\n\r\n    function getCrossXHR() {\r\n        var xmlhttp;\r\n        try {\r\n            xmlhttp = new ActiveXObject(\"Msxml2.XMLHTTP\");\r\n        }\r\n        catch (e) {\r\n            try {\r\n                xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n            }\r\n            catch (E) {\r\n                xmlhttp = false;\r\n            }\r\n        }\r\n        if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {\r\n            xmlhttp = new XMLHttpRequest();\r\n        }\r\n        return xmlhttp;\r\n    }\r\n\r\n\r\n    var indexStep = 3;\r\n    $s.index = indexStep;\r\n    $s.incrementIndex = function() {\r\n        $s.index += indexStep;\r\n        if($s.index >= $s.currentVills.length) {\r\n            $s.index = 0;\r\n        }\r\n        console.log($s.index, 'index');\r\n    };\r\n    $s.decrementIndex = function() {\r\n        $s.index -= indexStep;\r\n        if($s.index < 0) {\r\n            $s.index = $s.currentVills.length - 2 ;\r\n        }\r\n        console.log($s.index, 'index');\r\n    };\r\n\r\n    function cutDesripction() {\r\n        var sentences = $s.villaInfo.description.split('.');\r\n\r\n        $s.descriptionText1 = (function(){\r\n            var result = sentences.slice(0,5).reduce(function(prev, curr){\r\n                return prev + \".\" + curr;\r\n            })\r\n            return result + \".\";\r\n        }());\r\n\r\n        $s.descriptionText2 = (function(){\r\n            var result = sentences.slice(5).reduce(function(prev, curr){\r\n                return prev + \".\" + curr;\r\n            })\r\n            return result + \".\";\r\n        }());\r\n    }\r\n\r\n\r\n    function villsOfTargetReg() {\r\n        $h.get('/api/data/table?t=342')\r\n            .success(function(vills){\r\n                regionAdd(vills);\r\n                vills.some(function(villa){\r\n                    if(villa.region == $s.villaInfo.region) {\r\n                        $s.currentVills.push(villa);\r\n\r\n                    }\r\n                });\r\n                // check the index of the villaInfo in currentVills\r\n                checkVillaStatus($s.currentVills);\r\n\r\n                $s.currentVills.forEach(function(villa, index) {\r\n                    if(villa.name == $s.villaInfo.name ) {\r\n                        $s.index = index;\r\n                    }\r\n                })\r\n                $s.prevVillName = $s.index > 0 ? $s.currentVills[$s.index - 1].name : $s.currentVills[$s.currentVills.length - 1].name;\r\n                $s.nexVillName = $s.index >= $s.currentVills.length - 1 ? $s.currentVills[0].name : $s.currentVills[$s.index + 1].name;\r\n            });\r\n    }\r\n\r\n    function checkVillaStatus(array) {\r\n        $h.get('/api/data/table?t=364')\r\n            .success(function(vills){\r\n                console.log(vills);\r\n                vills.forEach(function(villa){\r\n                    array.forEach(function(elem){\r\n                        if(villa.f1 != undefined) {\r\n                            if(elem.name == villa.f1[0].f1 && villa.status == 'hide') {\r\n                                var position = array.indexOf(elem);\r\n                                array.splice(position, 1);\r\n                            }\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n    }\r\n\r\n\r\n    getCurrentVillRegionId = function(villRegionId) {\r\n        return villRegionId.match(/\\d+/g)[0];\r\n    }\r\n\r\n    function filterByTableId(obj, tableId) {\r\n        return obj.filter(function(el) {\r\n            return el.table_id == tableId;\r\n        })\r\n    }\r\n    $s.slidePoint = function(index) {\r\n        var items =  Array.prototype.slice.call(document.querySelectorAll('.item.ng-scope'));\r\n        var points = Array.prototype.slice.call(document.querySelectorAll('.point.ng-scope'));\r\n\r\n        var currentIndex = null;\r\n        var currentPoint = null;\r\n        points.forEach(function(point){\r\n            if(point.classList.contains('active')) {\r\n                point.classList.remove('active');\r\n\r\n            }\r\n        })\r\n        items.forEach(function(item){\r\n            if(item.classList.contains('fx')) {\r\n                item.classList.remove('fx');\r\n            }\r\n        })\r\n        items[index].classList.add('fx');\r\n        points[index].classList.add('active');\r\n\r\n        clearInterval(carousel);\r\n        carousel =  setInterval(function(){\r\n            runCrousel()\r\n        }, 8000);\r\n\r\n    }\r\n    $s.nextSlide = function() {\r\n        console.log('swipe');\r\n        var items =  Array.prototype.slice.call(document.querySelectorAll('.item.ng-scope'));\r\n        var points = Array.prototype.slice.call(document.querySelectorAll('.point.ng-scope'));\r\n\r\n        var currentIndex = null;\r\n        var currentPoint = null;\r\n        points.forEach(function(point){\r\n            if(point.classList.contains('active')) {\r\n                currentPoint = points.indexOf(point);\r\n\r\n            }\r\n        })\r\n        items.forEach(function(item){\r\n            if(item.classList.contains('fx')) {\r\n                currentIndex = items.indexOf(item);\r\n            }\r\n        })\r\n        if(currentIndex < items.length-1) {\r\n            items[currentIndex].classList.remove('fx');\r\n            points[currentIndex].classList.remove('active');\r\n\r\n            items[currentIndex+1].classList.add('fx');\r\n            points[currentIndex+1].classList.add('active');\r\n        }\r\n        else {\r\n            items[currentIndex].classList.remove('fx');\r\n            items[0].classList.add('fx');\r\n\r\n            points[currentIndex].classList.remove('active');\r\n            points[0].classList.add('active');\r\n        }\r\n        clearInterval(carousel);\r\n        carousel =  setInterval(function(){\r\n            runCrousel()\r\n        }, 8000);\r\n    }\r\n    $s.prevSlide = function() {\r\n        console.log('swipe');\r\n        var items =  Array.prototype.slice.call(document.querySelectorAll('.item.ng-scope'));\r\n        var points = Array.prototype.slice.call(document.querySelectorAll('.point.ng-scope'));\r\n\r\n        var currentIndex = null;\r\n        var currentPoint = null;\r\n        points.forEach(function(point){\r\n            if(point.classList.contains('active')) {\r\n                currentPoint = points.indexOf(point);\r\n\r\n            }\r\n        })\r\n        items.forEach(function(item){\r\n            if(item.classList.contains('fx')) {\r\n                currentIndex = items.indexOf(item);\r\n            }\r\n        })\r\n        if(currentIndex == 0) {\r\n            items[currentIndex].classList.remove('fx');\r\n            points[currentIndex].classList.remove('active');\r\n\r\n            items[items.length-1].classList.add('fx');\r\n            points[points.length-1].classList.add('active');\r\n        }\r\n        else {\r\n            items[currentIndex].classList.remove('fx');\r\n            points[currentIndex].classList.remove('active');\r\n\r\n            items[currentIndex-1].classList.add('fx');\r\n            points[currentIndex-1].classList.add('active');\r\n        }\r\n        clearInterval(carousel);\r\n        carousel =  setInterval(function(){\r\n            runCrousel()\r\n        }, 8000);\r\n\r\n\r\n    }\r\n\r\n    var carousel =  setInterval(function(){\r\n        runCrousel()\r\n    }, 8000);\r\n\r\n    function runCrousel() {\r\n        var items =  Array.prototype.slice.call(document.querySelectorAll('.item.ng-scope'));\r\n        var points = Array.prototype.slice.call(document.querySelectorAll('.point.ng-scope'));\r\n\r\n        function slide(array, className) {\r\n            var lem = null;\r\n            array.forEach(function(elem){\r\n                if(elem.classList.contains(className)) {\r\n                    lem = array.indexOf(elem);\r\n                }\r\n            })\r\n\r\n            if(lem < array.length-1) {\r\n                array[lem].classList.remove(className);\r\n                array[lem+1].classList.add(className);\r\n            }\r\n            else {\r\n                array[lem].classList.remove(className);\r\n                array[0].classList.add(className);\r\n            }\r\n        }\r\n        slide(items, 'fx');\r\n        slide(points, 'active');\r\n    }\r\n\r\n\r\n}]);\r\n\r\nfunction filterByTableId(obj, tableId) {\r\n    return obj.filter(function(el) {\r\n        return el.table_id == tableId;\r\n    })\r\n}\r\n\r\nvar regsWithDir = [\r\n    {\r\n        reg: 'Балканы',\r\n        dir: ['Черногория','Хорватия','Пафос','Крит']\r\n    },\r\n    {\r\n        reg: 'Италия',\r\n        dir: ['Сардиния','Озеро Комо','Тоскана','Сициля','Итальянские Альпы']\r\n    },\r\n    {\r\n        reg: 'Франция',\r\n        dir: ['Куршевель','Шамони','Прованс','Канны','Сан Тропе','Ницца']\r\n    },\r\n    {\r\n        reg: 'Карибы',\r\n        dir: ['Майами','Мексика','Пунта Кана']\r\n    },\r\n    {\r\n        reg: 'Азия',\r\n        dir: ['Самуи','Пхукет','Сейшелы','Мальдивы','Маврикий','Гоа','Бали']\r\n    },\r\n    {\r\n        reg: 'Испания',\r\n        dir: ['Ибица','Майорка','Барселона','Марбелья']\r\n    }\r\n];\r\n\r\nvar regionAdd = function(vills) {\r\n\r\n    regsWithDir.forEach(function(item){\r\n        item.dir.forEach(function(direct){\r\n            vills.forEach(function(villa){\r\n                if(villa.f8 != undefined && direct == villa.f8[0].f1) {\r\n                    villa.region = item.reg;\r\n                }\r\n            });\r\n        });\r\n    });\r\n}\r\nvar regionAddSingleTarget = function(villa) {\r\n\r\n    regsWithDir.forEach(function(item){\r\n        item.dir.forEach(function(direct){\r\n            if(villa.f8 != undefined && direct == villa.f8[0].f1) {\r\n                villa.region = item.reg;\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction initialize(coordinates, villaName) {\r\n\r\n    if(arguments.length == 2) {\r\n\r\n        var coordinates = [coordinates[0].latitude, coordinates[0].longitude];\r\n        var mymap = L.map('map-id').setView(coordinates, 10);\r\n        mymap.scrollWheelZoom.disable();\r\n\r\n\r\n        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {\r\n            attribution: 'Map data © <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"http://mapbox.com\">Mapbox</a>',\r\n            maxZoom: 18,\r\n            id: 'zardwi.02b6pmgg',\r\n            accessToken: 'pk.eyJ1IjoiemFyZHdpIiwiYSI6ImNpbnZxOTRieTAwcHR2c2tsZng2amgwdmsifQ.HDmszTUL_ChtJUXtMLy9vQ'\r\n        }).addTo(mymap);\r\n\r\n        var vIcon = L.icon({\r\n            iconUrl: '/files/villa/location-arrow.png',\r\n            shadowUrl: '/files/villa/location.png',\r\n\r\n            iconSize:[9, 15],\r\n            shadowSize:   [56, 80],\r\n            iconAnchor:   [6, 56],\r\n            shadowAnchor: [28, 80],\r\n            popupAnchor: [0, 0]  // left and top\r\n\r\n        });\r\n\r\n        var marker = L.marker(coordinates, {icon: vIcon}).addTo(mymap);\r\n        marker.bindPopup(villaName).openPopup();\r\n\r\n        document.querySelector('.leaflet-popup').style.left = '0px';\r\n        if(window.screen.width <= 768) {\r\n            var popupWidth = villaName.length * 14;\r\n            document.querySelector('.leaflet-popup-content').style.width = popupWidth.toString() + 'px';\r\n        }\r\n    }\r\n    else {\r\n        var coordinates = [50.4501, 30.5234];\r\n        var mymap = L.map('map-id').setView(coordinates, 2);\r\n        mymap.scrollWheelZoom.disable();\r\n\r\n        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {\r\n            attribution: 'Map data © <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"http://mapbox.com\">Mapbox</a>',\r\n            maxZoom: 18,\r\n            id: 'zardwi.02b6pmgg',\r\n            accessToken: 'pk.eyJ1IjoiemFyZHdpIiwiYSI6ImNpbnZxOTRieTAwcHR2c2tsZng2amgwdmsifQ.HDmszTUL_ChtJUXtMLy9vQ'\r\n        }).addTo(mymap);\r\n    }\r\n\r\n}\r\n\r\nvar benefits = [\r\n    {\r\n        name: 'Частный пляж',\r\n        className: 'beach'\r\n    },\r\n    {\r\n        name: 'Частный причал',\r\n        className: 'pier'\r\n    },\r\n    {\r\n        name: 'Кинозал',\r\n        className: 'cinema-hall'\r\n    },\r\n    {\r\n        name: 'Бассейн',\r\n        className: 'swimm'\r\n    },\r\n    {\r\n        name: 'Спорт Зал',\r\n        className: 'sport'\r\n    },\r\n    {\r\n        name: 'Сауна',\r\n        className: 'sauna-bucket'\r\n\r\n    },\r\n    {\r\n        name: 'Джакузи',\r\n        className: 'jacuzzi'\r\n    },\r\n    {\r\n        name: 'Wi-Fi',\r\n        className: 'wi-fi'\r\n    },\r\n    {\r\n        name: 'Зона для охраны',\r\n        className: 'secure'\r\n    },\r\n    {\r\n        name: 'Камин',\r\n        className: 'fireplace'\r\n    },\r\n    {\r\n        name: 'Барбекю',\r\n        className: 'barbecue'\r\n    },\r\n    {\r\n        name: 'Альфреско',\r\n        className: 'alfresco'\r\n    },\r\n    {\r\n        name: 'Кондиционер',\r\n        className: 'conditioner'\r\n    },\r\n    {\r\n        name: 'DVD-проигрыватель',\r\n        className: 'dvd'\r\n    },\r\n    {\r\n        name: 'Apple гарнитура',\r\n        className: 'apple'\r\n    }\r\n\r\n];\r\n\r\n\r\nwindow.addEventListener('load', function(){\r\n// open/hide readMore button\r\n    var readMore = document.getElementsByClassName(\"readMore\");\r\n    for (var i=0; i<readMore.length; i++) {\r\n        var showHideText = function () {\r\n            var blockParent  = this.parentElement,\r\n                readMoreInfo = blockParent.getElementsByClassName(\"readMoreInfo\");\r\n            for (var j=0; j<readMore.length&&this.innerHTML != \"Скрыть\"; j++) {\r\n                var readMoreInfoAll = document.getElementsByClassName(\"readMoreInfo\");\r\n                readMoreInfoAll[j].classList.remove(\"active\");\r\n                readMore[j].innerHTML = \"Читать дальше\";\r\n            }\r\n            readMoreInfo[0].classList.toggle(\"active\");\r\n            if (this.innerHTML == \"Читать дальше\") {\r\n                this.innerHTML = \"Скрыть\";\r\n            } else {\r\n                this.innerHTML = \"Читать дальше\";\r\n            }\r\n        }\r\n        readMore[i].addEventListener('click', showHideText, false);\r\n    }\r\n\r\n\r\n// toggle favorite\r\n    var favorite = document.getElementById('favorite-add'),\r\n        favoriteMobile = document.getElementById('favorite-add-mobile');\r\n\r\n    function toggleFavorite() {\r\n        favorite.classList.toggle('active');\r\n        favoriteMobile.classList.toggle('active');\r\n    }\r\n    favorite.addEventListener('click', toggleFavorite, false);\r\n    favoriteMobile.addEventListener('click', toggleFavorite, false);\r\n\r\n// toggle mobile button\r\n    var mobileButton = document.getElementById('main-button-block'),\r\n        button = mobileButton.getElementsByTagName('button');\r\n\r\n    function toggleClassButton() {\r\n\r\n        var thisBlockInfoId = this.getAttribute(\"name\");\r\n\r\n        for(var j=0; j<button.length; j++){\r\n\r\n            var blockInfoId = button[j].getAttribute(\"name\");\r\n\r\n            button[j].classList.remove('active');\r\n            document.getElementById(blockInfoId).classList.remove('active');\r\n\r\n        }\r\n\r\n\r\n\r\n        this.classList.add('active');\r\n        document.getElementById(thisBlockInfoId).classList.add('active');\r\n    }\r\n    for(var i=0; i<button.length; i++){\r\n        button[i].addEventListener('click', toggleClassButton, false);\r\n    }\r\n\r\n});\r\n\r\n// smooth scroll\r\nScroller = {\r\n    // control the speed of the scroller.\r\n    // dont change it here directly, please use Scroller.speed=50;\r\n    speed:10,\r\n\r\n    // returns the Y position of the div\r\n    gy: function (d) {\r\n        gy = d.offsetTop\r\n        if (d.offsetParent) while (d = d.offsetParent) gy += d.offsetTop\r\n        return gy\r\n    },\r\n\r\n    // returns the current scroll position\r\n    scrollTop: function (){\r\n        body=document.body\r\n        d=document.documentElement\r\n        if (body && body.scrollTop) return body.scrollTop\r\n        if (d && d.scrollTop) return d.scrollTop\r\n        if (window.pageYOffset) return window.pageYOffset\r\n        return 0\r\n    },\r\n\r\n    // attach an event for an element\r\n    // (element, type, function)\r\n    add: function(event, body, d) {\r\n        if (event.addEventListener) return event.addEventListener(body, d,false)\r\n        if (event.attachEvent) return event.attachEvent('on'+body, d)\r\n    },\r\n\r\n    // kill an event of an element\r\n    end: function(e){\r\n        if (window.event) {\r\n            window.event.cancelBubble = true\r\n            window.event.returnValue = false\r\n            return;\r\n        }\r\n        if (e.preventDefault && e.stopPropagation) {\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n        }\r\n    },\r\n\r\n    // move the scroll bar to the particular div.\r\n    scroll: function(d){\r\n        i = window.innerHeight || document.documentElement.clientHeight;\r\n        h=document.body.scrollHeight;\r\n        a = Scroller.scrollTop()\r\n        if(d>a)\r\n            if(h-d>i)\r\n                a+=Math.ceil((d-a)/Scroller.speed)\r\n            else\r\n                a+=Math.ceil((d-a-(h-d))/Scroller.speed)\r\n        else\r\n            a = a+(d-a)/Scroller.speed;\r\n        window.scrollTo(0,a)\r\n        if(a==d || Scroller.offsetTop==a)clearInterval(Scroller.interval)\r\n        Scroller.offsetTop=a\r\n    },\r\n    // initializer that adds the renderer to the onload function of the window\r\n    init: function(){\r\n        Scroller.add(window,'load', Scroller.render)\r\n    },\r\n\r\n    // this method extracts all the anchors and validates then as # and attaches the events.\r\n    render: function(){\r\n        a = document.getElementsByTagName('a');\r\n        Scroller.end(this);\r\n        window.onscroll\r\n        for (i=0;i<a.length;i++) {\r\n            l = a[i];\r\n            if(l.href && l.href.indexOf('#') != -1 && ((l.pathname==location.pathname) || ('/'+l.pathname==location.pathname)) ){\r\n                Scroller.add(l,'click',Scroller.end)\r\n                l.onclick = function(){\r\n                    Scroller.end(this);\r\n                    l=this.hash.substr(1);\r\n                    a = document.getElementsByTagName('a');\r\n                    for (i=0;i<a.length;i++) {\r\n                        if(a[i].name == l){\r\n                            clearInterval(Scroller.interval);\r\n                            Scroller.interval=setInterval('Scroller.scroll('+Scroller.gy(a[i])+')',10);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n// invoke the initializer of the scroller\r\nScroller.init();\r\n\r\n$('.locate-to').click(function(){\r\n    $('html, body').animate({\r\n        scrollTop: $(\"#map-id\").offset().top\r\n    }, 2000);\r\n})\r\n\r\n\r\n\r\n//button availability\r\n$('.availability-block.mobile button').click(function() {\r\n    $('.mobile.form-block').addClass('form-act');\r\n    $('.cancelItem').click(function () {\r\n        $('.mobile.form-block').removeClass('form-act');\r\n    })\r\n});"]}